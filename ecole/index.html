<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>알고리즘 8문제: Java 중심 풀이 분석</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');

        html,
        body {
            font-family: 'Noto Sans KR', sans-serif;
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .slide {
            display: none;
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
            width: 100%;
            height: 100%;
            position: absolute;
        }

        .slide.active {
            display: flex;
            opacity: 1;
            z-index: 1;
        }

        .code-container {
            position: absolute;
            inset: 0;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            visibility: hidden;
        }

        .code-container.visible {
            opacity: 1;
            visibility: visible;
        }

        .lang-indicator {
            transition: all 0.3s ease-in-out;
        }

        /* Custom scrollbar for webkit browsers */
        .code-block::-webkit-scrollbar {
            width: 8px;
        }

        .code-block::-webkit-scrollbar-track {
            background: #282c34;
            /* Match code background */
        }

        .code-block::-webkit-scrollbar-thumb {
            background: #5c6370;
            /* A bit lighter than background */
            border-radius: 4px;
        }

        .code-block::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
    </style>
</head>

<body class="bg-white text-black">

    <div id="presentation-root" class="relative w-screen h-screen">
        <div id="presentation-container" class="w-full h-full bg-white flex flex-col overflow-hidden">
        </div>
        <!-- Navigation areas are now narrow strips on the sides -->
        <div id="nav-left" class="absolute top-0 left-0 w-24 h-full cursor-pointer z-20"></div>
        <div id="nav-right" class="absolute top-0 right-0 w-24 h-full cursor-pointer z-20"></div>
    </div>

    <script src="slides.js"></script>

    <script>
        const container = document.getElementById('presentation-container');
        let currentSlide = 0;
        let currentLang = 0; // 0: Java, 1: Python, 2: JS

        function renderSlides() {
            container.innerHTML = '';
            presentationData.forEach((data, index) => {
                let slideHtml = '';
                // Use 'description' instead of 'intent'
                const descriptionHtml = data.description ? data.description.replace(/\*\*(.*?)\*\*/g, '<strong class="font-semibold text-sky-600">$1</strong>') : '';

                if (data.type === 'title') {
                    slideHtml = `<div class="slide flex-col items-center justify-center p-8 text-center" data-slide-index="${index}">
                        <h1 class="text-7xl md:text-8xl font-bold text-black mb-16">${data.title}</h1>
                        <div class="mt-8 text-3xl md:text-4xl text-gray-700">
                           <p>${data.author}</p>
                           <p class="mt-2 font-semibold text-gray-800">${data.author_detail}</p>
                        </div>
                    </div>`;
                } else if (data.type === 'toc') {
                    slideHtml = `<div class="slide flex-col items-center justify-center p-8" data-slide-index="${index}">
                        <h2 class="text-6xl md:text-7xl font-bold mb-16 text-black">${data.title}</h2>
                        <ul class="grid grid-cols-1 md:grid-cols-2 gap-x-20 gap-y-8 text-3xl md:text-4xl text-gray-800">
                            ${data.items.map((item, i) => `<li class="flex items-center"><span class="text-gray-500 font-bold mr-4">${i + 1}.</span>${item}</li>`).join('')}
                        </ul></div>`;
                } else if (data.type === 'problem') {
                    const languages = ['java', 'python', 'javascript'];
                    let codeContainerHtml = '';

                    languages.forEach(lang => {
                        codeContainerHtml += `
                            <div class="code-container" data-lang="${lang}">
                                <div class="code-block bg-[#282c34] rounded-xl shadow-lg p-4 text-lg h-full overflow-auto">
                                    <pre><code class="language-${lang}">${data.codes[lang]}</code></pre>
                                </div>
                            </div>`;
                    });

                    slideHtml = `
                        <div class="slide flex-col p-8 md:p-12" data-slide-index="${index}" data-is-problem="true">
                            <div class="flex-shrink-0">
                                <h2 class="text-4xl md:text-5xl font-bold mb-4 text-black">${data.title}</h2>
                                <!-- Changed title to '문제 설명' -->
                                <div class="bg-gray-50 p-4 rounded-xl border border-gray-200">
                                    <h3 class="text-xl md:text-2xl font-semibold text-black mb-2">문제 설명</h3>
                                    <p class="text-lg md:text-xl text-gray-700 leading-relaxed">${descriptionHtml}</p>
                                </div>
                            </div>
                            <div class="flex-1 mt-6 flex flex-col min-h-0">
                                <div class="flex items-center justify-center space-x-4 mb-4">
                                    <span class="lang-indicator java text-2xl font-bold p-2">Java</span>
                                    <span class="lang-indicator python text-2xl font-bold p-2">Python</span>
                                    <span class="lang-indicator javascript text-2xl font-bold p-2">JavaScript</span>
                                </div>
                                <div class="flex-1 relative min-h-0">${codeContainerHtml}</div>
                            </div>
                        </div>`;
                }
                container.insertAdjacentHTML('beforeend', slideHtml);
            });
            document.querySelectorAll('pre code').forEach(block => hljs.highlightElement(block));
        }

        function updateSlideState() {
            const slides = document.querySelectorAll('.slide');
            slides.forEach((slide, index) => slide.classList.toggle('active', index === currentSlide));

            const activeSlide = slides[currentSlide];
            if (activeSlide && activeSlide.dataset.isProblem) {
                const languages = ['java', 'python', 'javascript'];
                const currentLangName = languages[currentLang];

                activeSlide.querySelectorAll('.lang-indicator').forEach((indicator, index) => {
                    const isActive = index === currentLang;
                    indicator.classList.toggle('text-black', isActive);
                    indicator.classList.toggle('text-gray-300', !isActive);
                    indicator.style.transform = isActive ? 'scale(1.1)' : 'scale(1.0)';
                });

                activeSlide.querySelectorAll('.code-container').forEach(container => {
                    const isActive = container.dataset.lang === currentLangName;
                    container.classList.toggle('visible', isActive);
                });
            }
        }

        const goNext = () => {
            const activeSlide = document.querySelector('.slide.active');
            if (!activeSlide) return;

            if (activeSlide.dataset.isProblem) {
                if (currentLang < 2) { // 2 is the last language index
                    currentLang++;
                } else {
                    if (currentSlide < presentationData.length - 1) {
                        currentSlide++;
                        currentLang = 0;
                    }
                }
            } else {
                if (currentSlide < presentationData.length - 1) currentSlide++;
            }
            updateSlideState();
        };

        const goPrev = () => {
            const activeSlide = document.querySelector('.slide.active');
            if (!activeSlide) return;

            if (activeSlide.dataset.isProblem) {
                if (currentLang > 0) {
                    currentLang--;
                } else {
                    if (currentSlide > 0) {
                        currentSlide--;
                        const prevSlide = document.querySelector(`[data-slide-index="${currentSlide}"]`);
                        if (prevSlide.dataset.isProblem) {
                            currentLang = 2; // Start from the last language on the previous problem slide
                        }
                    }
                }
            } else {
                if (currentSlide > 0) currentSlide--;
            }
            updateSlideState();
        };

        document.addEventListener('DOMContentLoaded', () => {
            renderSlides();
            updateSlideState();
            document.getElementById('nav-left').addEventListener('click', goPrev);
            document.getElementById('nav-right').addEventListener('click', goNext);
            document.addEventListener('keydown', e => {
                if (e.key === 'ArrowRight' || e.key === ' ') goNext();
                if (e.key === 'ArrowLeft') goPrev();
            });
        });
    </script>
</body>

</html>